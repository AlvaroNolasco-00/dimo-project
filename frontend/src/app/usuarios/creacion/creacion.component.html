<div class="creacion-container">
  <div class="header">
    <h1>Crear Nuevo Usuario</h1>
    <p>Complete el formulario para registrar un nuevo usuario en el sistema. El usuario será aprobado automáticamente.
    </p>
  </div>

  <div class="form-card">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

      <!-- Nombre Completo -->
      <div class="form-group">
        <label for="full_name">Nombre Completo</label>
        <input id="full_name" type="text" formControlName="full_name" placeholder="Ej. Juan Pérez"
          [class.invalid]="userForm.get('full_name')?.invalid && userForm.get('full_name')?.touched">
        <div class="error-msg" *ngIf="userForm.get('full_name')?.invalid && userForm.get('full_name')?.touched">
          El nombre es requerido.
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Correo Electrónico</label>
        <input id="email" type="email" formControlName="email" placeholder="ejemplo@correo.com"
          [class.invalid]="userForm.get('email')?.invalid && userForm.get('email')?.touched">
        <div class="error-msg" *ngIf="userForm.get('email')?.hasError('required') && userForm.get('email')?.touched">
          El correo es requerido.
        </div>
        <div class="error-msg" *ngIf="userForm.get('email')?.hasError('email') && userForm.get('email')?.touched">
          Formato de correo inválido.
        </div>
      </div>

      <!-- Password -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input id="password" type="password" formControlName="password" placeholder="******"
          [class.invalid]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
        <div class="error-msg"
          *ngIf="userForm.get('password')?.hasError('required') && userForm.get('password')?.touched">
          La contraseña es requerida.
        </div>
        <div class="error-msg"
          *ngIf="userForm.get('password')?.hasError('minlength') && userForm.get('password')?.touched">
          Mínimo 6 caracteres.
        </div>
      </div>

      <!-- Rol Admin -->
      <div class="form-group checkbox-group">
        <label class="container-checkbox">
          <input type="checkbox" formControlName="is_admin">
          <span class="checkmark"></span>
          Es Administrador
        </label>
        <small class="hint">Los administradores tienen acceso completo al sistema.</small>
      </div>

      <!-- Buttons -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onCancel()">Cancelar</button>
        <button type="submit" class="btn-primary" [disabled]="userForm.invalid || loading">
          @if (!loading) {
          <span>Crear Usuario</span>
          }
          @if (loading) {
          <span>Guardando...</span>
          }
        </button>
      </div>

      <!-- Feedback -->
      @if (error) {
      <div class="alert error">{{ error }}</div>
      }
      @if (success) {
      <div class="alert success">{{ success }}</div>
      }

    </form>
  </div>
</div>