<div class="session-sidebar" [class.collapsed]="isCollapsed()">
    <button class="collapse-toggle" (click)="toggleSidebar()"
        [title]="isCollapsed() ? 'Mostrar trabajos recientes' : 'Ocultar'">
        <i class="ph" [class.ph-caret-left]="isCollapsed()" [class.ph-caret-right]="!isCollapsed()"></i>
    </button>

    <div class="sidebar-content">
        <div class="gallery-header">
            <h3>Trabajos Recientes</h3>
            <span class="count">{{ galleryItems().length }}</span>
        </div>

        <div class="gallery-list">
            @for (item of galleryItems(); track item.id) {
            <div class="gallery-item" (click)="imageSelected.emit(item)">
                <div class="thumb-wrapper">
                    <img [src]="getSafeUrl(item.blob)" [alt]="item.name">
                    <button class="delete-btn" (click)="onDelete(item.id, $event)">Ã—</button>
                </div>
                <div class="meta">
                    <span class="name">{{ item.name }}</span>
                    <span class="time">{{ item.timestamp | date:'shortTime' }}</span>
                </div>
            </div>
            }
        </div>
    </div>
</div>